!function(e,r){var a=e.module("baasic.membership",["baasic.api"]);!function(e,r,a){"use strict";r.service("baasicLoginRouteService",["baasicUriTemplateService",function(e){return{login:e.parse("login/{?embed,fields,options}"),parse:e.parse,social:{get:e.parse("login/social/{provider}/{?returnUrl}"),post:e.parse("login/social/{provider}/{?embed,fields,options}")}}}])}(e,a),function(e,r,a){"use strict";r.service("baasicLoginService",["baasicConstants","baasicApiService","baasicApiHttp","baasicAuthorizationService","baasicLoginRouteService",function(r,a,t,s,n){var i=function(){var e,r,a=/\+/g,t=/([^&=]+)=?([^&]*)/g,s=function(e){return decodeURIComponent(e.replace(a," "))},n=window.location.search.substring(1);for(e={};r=t.exec(n);)e[s(r[1])]=s(r[2]);return e};return{login:function(r){var a=e.copy(r),i="grant_type=password&username="+a.username+"&password="+a.password;if(a.options){var o=a.options;e.isArray(o)&&(a.options=o.join())}return t({url:n.login.expand(a),method:"POST",data:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(e){s.updateAccessToken(e)})},loadUserData:function(e){return e=e||{},t.get(n.login.expand(e),{headers:{Accept:"application/json; charset=UTF-8"}})},logout:function(e,r){return t({url:n.login.expand({}),method:"DELETE",data:{token:e,type:r}}).success(function(){s.updateAccessToken(null)})},routeService:n,social:{get:function(e,r){var s={provider:e,returnUrl:r};return t.get(n.social.get.expand(a.findParams(s)))},post:function(e,i,o){var c={provider:e};return o&&(c.options=o),t({url:n.social.post.expand({provider:e,options:o}),method:"POST",data:a.createParams(i)[r.modelPropertyName],headers:{"Content-Type":"application/json; charset=UTF-8"}}).success(function(e){e&&!e.status&&s.updateAccessToken(e)})},parseResponse:function(e,r){var a=i(),t={};switch(e){case"twitter":t.oAuthToken=a.oauth_token,t.oAuthVerifier=a.oauth_verifier;break;default:t.code=a.code,t.returnUrl=r}return t}}}}])}(e,a),function(e,r,a){"use strict";r.service("baasicPasswordRecoveryRouteService",["baasicUriTemplateService",function(e){return{passwordRecovery:e.parse("recover-password"),parse:e.parse}}])}(e,a),function(e,r,a){"use strict";r.service("baasicPasswordRecoveryService",["baasicApiHttp","baasicPasswordRecoveryRouteService",function(e,r){return{requestReset:function(a){return e({url:r.passwordRecovery.expand({}),method:"POST",data:a})},reset:function(a){return e({url:r.passwordRecovery.expand({}),method:"PUT",data:a})},routeService:r}}])}(e,a),function(e,r,a){"use strict";r.service("baasicRegisterRouteService",["baasicUriTemplateService",function(e){return{create:e.parse("register"),activate:e.parse("register/activate/{activationToken}/")}}])}(e,a),function(e,r,a){"use strict";r.service("baasicRegisterService",["baasicApiHttp","baasicApiService","baasicConstants","baasicRegisterRouteService","baasicAuthorizationService",function(e,r,a,t,s){return{create:function(s){return e.post(t.create.expand({}),r.createParams(s)[a.modelPropertyName])},activate:function(a){var n=r.getParams(a,"activationToken");return e({url:t.activate.expand(n),method:"PUT"}).success(function(e){s.updateAccessToken(e)})},routeService:t}}])}(e,a),function(e,r,a){"use strict";r.service("baasicRoleRouteService",["baasicUriTemplateService",function(e){return{find:e.parse("lookups/roles/{?searchQuery,page,rpp,sort,embed,fields}"),get:e.parse("lookups/roles/{id}/{?embed,fields}"),create:e.parse("lookups/roles"),parse:e.parse}}])}(e,a),function(e,r,a){"use strict";r.service("baasicRoleService",["baasicApiHttp","baasicApiService","baasicConstants","baasicRoleRouteService",function(e,r,a,t){return{find:function(a){return e.get(t.find.expand(r.findParams(a)))},get:function(a,s){return e.get(t.get.expand(r.getParams(a,s)))},create:function(s){return e.post(t.create.expand({}),r.createParams(s)[a.modelPropertyName])},update:function(t){var s=r.updateParams(t);return e.put(s[a.modelPropertyName].links("put").href,s[a.modelPropertyName])},remove:function(t){var s=r.removeParams(t);return e.delete(s[a.modelPropertyName].links("delete").href)},routeService:t}}])}(e,a),function(e,r,a){"use strict";r.service("baasicUserRouteService",["baasicUriTemplateService",function(e){return{exists:e.parse("users/{username}/exists/"),find:e.parse("users/{?searchQuery,page,rpp,sort,embed,fields}"),get:e.parse("users/{username}/{?embed,fields}"),create:e.parse("users"),changePassword:e.parse("users/{username}/change-password"),parse:e.parse,socialLogin:{get:e.parse("users/{username}/social-login"),remove:e.parse("users/{username}/social-login/{provider}")}}}])}(e,a),function(e,r,a){"use strict";r.service("baasicUserService",["baasicApiHttp","baasicApiService","baasicConstants","baasicUserRouteService",function(r,a,t,s){return{exists:function(e,t){return r.get(s.exists.expand(a.getParams(e,t,"username")))},find:function(e){return r.get(s.find.expand(a.findParams(e)))},get:function(e){return r.get(s.get.expand(a.getParams(e,"username")))},create:function(e){return r.post(s.create.expand({}),a.createParams(e)[t.modelPropertyName])},update:function(e){var s=a.updateParams(e);return r.put(s[t.modelPropertyName].links("put").href,s[t.modelPropertyName])},remove:function(e){var s=a.removeParams(e);return r.delete(s[t.modelPropertyName].links("delete").href)},unlock:function(e){var s=a.updateParams(e);return r.put(s[t.modelPropertyName].links("unlock").href)},lock:function(e){var s=a.updateParams(e);return r.put(s[t.modelPropertyName].links("lock").href)},approve:function(e){var s=a.updateParams(e);return r.put(s[t.modelPropertyName].links("approve").href)},disapprove:function(e){var s=a.updateParams(e);return r.put(s[t.modelPropertyName].links("disapprove").href)},changePassword:function(e,a){return r({url:s.changePassword.expand({username:e}),method:"PUT",data:a})},routeService:s,socialLogin:{get:function(e){return r.get(s.socialLogin.get.expand({username:e}))},remove:function(t,n){var i;return i=n.hasOwnProperty("abrv")?{provider:n.abrv}:n.hasOwnProperty("id")?{provider:n.id}:e.extend({},n),i.username=t,r.delete(s.socialLogin.remove.expand(a.findParams(i)))}}}}])}(e,a)}(angular);